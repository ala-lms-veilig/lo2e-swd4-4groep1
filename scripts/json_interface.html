<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1 id="record-name">Record</h1>
    <p id="records-name">Records</p>
</body>
</html>

<script>

// Voor elke entiteit (incidenten, contacten, storingen, etc) in jullie project:
// Voeg json data toe aan db.json
// Codeer:
// een functie die alle records ophaalt (en teruggeeft als objecten van een zelf geschreven class)
// een functie die 1 record ophaalt met id als argument
// een functie die een record aanmaakt, met het object als argument
// een functie die een record aanpast, met het object als argument
// een functie die een record verwijderd, met het object als argument
// Log de returns naar de console.

async function showAllRecords() {
    const response = await fetch(`https://my-json-server.typicode.com/ala-lms-veilig/lo2e-swd4-4groep1/contacts`);
    const records = await response.json();

    console.log(records);

    const recordContainer = document.getElementById('records-name');

    for(let record of records) {
        recordContainer.innerHTML += `<li>${record.title}</li>`;
        console.log(record.title);
    }
}

showAllRecords();

 // http://localhost/Github_PHP/lo2e-swd4-4groep1/db.json
 async function showNewsInfo() {
        const response = await fetch(`https://my-json-server.typicode.com/ala-lms-veilig/lo2e-swd4-4groep1/news`);
        const newsInfo = await response.json();

        console.log(newsInfo);

        const template = document.getElementById("news_template");
        const container = document.getElementById("news_main");

        // If server doesn't work use newsInfo.newsInfo
        for (let news of newsInfo) {
            const clone = template.content.cloneNode(true);

            const img       = clone.querySelector(".news_img");
            const title     = clone.querySelector(".news_title");
            const text      = clone.querySelector(".news_text");

            img.src             = `images/${news.img}`;
            title.innerHTML     = news.title;
            text.innerHTML      = news.txt;

            container.appendChild(clone);
        }
    }

    showNewsInfo();

async function showRecord() {
    const response = await fetch(`https://my-json-server.typicode.com/ala-lms-veilig/lo2e-swd4-4groep1/test/1`);
    const record = await response.json();

    const recordContainer = document.getElementById('record-name');
    recordContainer.innerHTML = record.title;
    console.log(record);
    return record;
}


async function createRecord() {
    //POST
}

async function updateRecord() {
    //PATCH
}

async function deleteRecord() {
    //DELETE
}

const posts = "posts";


showAllRecords();
showRecord();
createRecord();
updateRecord();
deleteRecord();

</script>