<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <main id="record_main">
        <template id="record_template">
            <img class="recordAll_img_temp" src="" alt="">
            <h1 class="recordAll_naam_temp"></h1>
            <p class="recordAll_text_temp"></p>
            <p class="recordAll_nummer_temp"></p>
        </template>

        <section id="record_single">
            <img class="record_img_temp" src="" alt="">
            <h1 class="record_naam_temp"></h1>
            <p class="record_text_temp"></p>
            <p class="record_nummer_temp"></p>
        </section>
    </main>
    
</body>
</html>

<script>

// Voor elke entiteit (incidenten, contacten, storingen, etc) in jullie project:
// Voeg json data toe aan db.json
// Codeer:
// een functie die alle records ophaalt (en teruggeeft als objecten van een zelf geschreven class)
// een functie die 1 record ophaalt met id als argument
// een functie die een record aanmaakt, met het object als argument
// een functie die een record aanpast, met het object als argument
// een functie die een record verwijderd, met het object als argument
// Log de returns naar de console.

async function showAllRecords() {
     // http://localhost/Github_PHP/lo2e-swd4-4groep1/db.json
    const response = await fetch(`https://my-json-server.typicode.com/ala-lms-veilig/lo2e-swd4-4groep1/test`);
    const records = await response.json();

    console.log(records);

    const template = document.getElementById('record_template');
    const container = document.getElementById("record_main");

    // If server doesn't work use records.test
    for(let record of records) {
        const clone = template.content.cloneNode(true);

            const img       = clone.querySelector(".recordAll_img_temp");
            const naam      = clone.querySelector(".recordAll_naam_temp");
            const text      = clone.querySelector(".recordAll_text_temp");
            const nummer    = clone.querySelector(".recordAll_nummer_temp");

            //img.src           = "images/${record.img}"; // If directly in <img>
            img.innerHTML       = `<img src="images/${record.img}" alt="${record.naam}">`;
            naam.innerHTML      = record.naam;
            text.innerHTML      = record.txt;
            nummer.innerHTML    = record.nummer;

            container.appendChild(clone);
    }
}

showAllRecords();


async function showRecord(recordId) {
    // http://localhost/Github_PHP/lo2e-swd4-4groep1/db.json
    const response = await fetch(`https://my-json-server.typicode.com/ala-lms-veilig/lo2e-swd4-4groep1/test/${recordId}`);
    const record = await response.json();

    console.log(record);

    const record_single = document.getElementById('record_single');

    const img       = document.querySelector(".record_img_temp");
    const naam      = document.querySelector(".record_naam_temp");
    const text      = document.querySelector(".record_text_temp");
    const nummer    = document.querySelector(".record_nummer_temp");

    img.innerHTML       = `<img src="images/${record.img}" alt="${record.naam}">`;
    naam.innerHTML      = record.naam;
    text.innerHTML      = record.txt;
    nummer.innerHTML    = record.nummer;

    return record;
}

showRecord(1);

async function createRecord() {
    //POST
}

async function updateRecord() {
    //PATCH
}

async function deleteRecord() {
    //DELETE
}

const posts = "posts";

</script>